import{b as G,d as J,e as K,f as U,g as W,i as X,j as Y,k as Z,l as ee,m as te,n as ie,o as ae,p as ne,q as re,r as oe,s as b,v as me,w as D,x as F,y as le,z as de}from"./chunk-MG4W3XTZ.js";import{A as B,B as L,F as O,a as E,b as T}from"./chunk-LNHBMWTA.js";import"./chunk-7B4WEPGY.js";import{a as z}from"./chunk-2NBET2DA.js";import"./chunk-VK4RGVHF.js";import{i as N}from"./chunk-ROIV5QGY.js";import{$b as j,Cb as i,Db as a,Eb as _,Fb as s,Gb as f,Ib as I,Kb as v,Lb as R,Oc as $,Qc as q,Rb as g,Sb as y,Tb as w,Tc as A,Vb as r,Xb as C,Ya as d,Za as h,ac as H,bc as x,hc as P,ic as Q,ja as k,pb as p,rb as u,sa as S,ta as M,xb as V}from"./chunk-VZFTKLKS.js";var ue=["input"],se=()=>[5,10,20],fe=()=>({color:"#1f516f"}),_e=()=>({color:"#e15639"});function Ce(e,t){e&1&&(i(0,"th",20),r(1," No. "),a())}function Se(e,t){if(e&1&&(i(0,"td",21),r(1),a()),e&2){let c=t.$implicit;d(),C(" ",c._id," ")}}function Me(e,t){e&1&&(i(0,"th",20),r(1,"Titulo "),a())}function he(e,t){if(e&1&&(i(0,"td",21),r(1),a()),e&2){let c=t.$implicit;d(),C(" ",c.titulo," ")}}function ve(e,t){e&1&&(i(0,"th",20),r(1," Tipo "),a())}function ge(e,t){if(e&1&&(i(0,"td",21),r(1),P(2,"titlecase"),a()),e&2){let c=t.$implicit;d(),C(" ",Q(2,1,c.tipo)," ")}}function ye(e,t){e&1&&(i(0,"th",20),r(1," A\xF1o "),a())}function we(e,t){if(e&1&&(i(0,"td",21),r(1),a()),e&2){let c=t.$implicit;d(),C(" ",c.anyo," ")}}function xe(e,t){e&1&&(i(0,"th",20),r(1," Puntuacion "),a())}function Ee(e,t){if(e&1&&(i(0,"td",21),r(1),a()),e&2){let c=t.$implicit;d(),C(" ",c.puntuacion," ")}}function Te(e,t){e&1&&(i(0,"th",20),r(1,"Acciones"),a())}function be(e,t){if(e&1){let c=I();i(0,"td",21)(1,"a",22),v("click",function(){let o=S(c).$implicit,n=R();return M(n.updateMedia(o._id))}),i(2,"mat-icon"),r(3,"edit"),a()(),i(4,"a",23),v("click",function(o){let n=S(c).$implicit,l=R();return M(l.borrarMedia(n._id,o))}),i(5,"mat-icon"),r(6,"delete"),a()()()}e&2&&(d(),u("ngStyle",x(2,fe)),d(3),u("ngStyle",x(3,_e)))}function De(e,t){e&1&&_(0,"tr",24)}function Fe(e,t){e&1&&_(0,"tr",25)}function Ie(e,t){e&1&&(i(0,"p",18),r(1,"No hay registros"),a())}var Ze=(()=>{let t=class t{constructor(m,o,n,l){this._mediaService=m,this._routerService=o,this.confirmationService=n,this.messageService=l,this.displayedColumns=["id","titulo","tipo","anyo","puntuacion","acciones"],this.dataSource=new b}ngOnInit(){this.cargarMedia()}cargarMedia(){this._mediaService.getAllMedia().subscribe(m=>{console.log(m),this.dataSource=new b(m),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}updateMedia(m){this._routerService.navigate([`/media-frm/${m}`])}cargarFormulario(){this._routerService.navigate(["/media-frm"])}applyFilter(m){let o=m.target.value;this.dataSource.filter=o.trim().toLowerCase()}borrarMedia(m,o){this.confirmationService.confirm({target:o.target,message:"Seguro que quieres borrar la media?",header:"Accion Importante",icon:"pi pi-exclamation-triangle",acceptIcon:"none",rejectIcon:"none",rejectButtonStyleClass:"p-button-text",acceptLabel:"Si",rejectLabel:"No",accept:()=>{this._mediaService.delMedia(m).subscribe(n=>{n==!0?(this.messageService.add({severity:"success",summary:"Confirmed",detail:"Media borrado correctamente"}),this.reiniciarForm()):this.messageService.add({severity:"error",summary:"Error",detail:"Error al borrar la media",life:3e3})})},reject:()=>{this.messageService.add({severity:"info",summary:"Informacion",detail:"No se ha borrado el actor",life:3e3})}})}reiniciarForm(){this.dataSource=new b([]),this.cargarMedia(),this.inputElement.nativeElement.value="",this._routerService.navigate(["/media-crud"])}};t.\u0275fac=function(o){return new(o||t)(h(z),h(N),h(E),h(T))},t.\u0275cmp=k({type:t,selectors:[["app-media-crud"]],viewQuery:function(o,n){if(o&1&&(g(F,5),g(D,5),g(ue,5)),o&2){let l;y(l=w())&&(n.sort=l.first),y(l=w())&&(n.paginator=l.first),y(l=w())&&(n.inputElement=l.first)}},standalone:!0,features:[j([T,E]),H],decls:39,vars:6,consts:[["input",""],[1,"row"],[1,"col"],[1,"agregar"],["mat-raised-button","","color","primary",3,"click"],[1,"mat-elevation-z18"],["matInput","","placeholder","Introduzca una b\xFAsqueda",3,"keyup"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","titulo"],["matColumnDef","tipo"],["matColumnDef","anyo"],["matColumnDef","puntuacion"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"text-center"],["showFirstLastButtons","","aria-label","Seleccione pagina de media",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["matTooltip","Editar Media",1,"pointer",3,"click","ngStyle"],["matTooltip","Borrar Media",1,"pointer",3,"click","ngStyle"],["mat-header-row",""],["mat-row",""]],template:function(o,n){if(o&1){let l=I();i(0,"div",1)(1,"div",2)(2,"h1"),r(3,"Crud Media"),a(),_(4,"hr"),i(5,"div",3)(6,"button",4),v("click",function(){return S(l),M(n.cargarFormulario())}),r(7,"A\xF1adir"),a()(),_(8,"p-toast")(9,"p-confirmDialog"),i(10,"div",5)(11,"mat-form-field")(12,"mat-label"),r(13,"Filter"),a(),i(14,"input",6,0),v("keyup",function(pe){return S(l),M(n.applyFilter(pe))}),a()(),i(16,"table",7),s(17,8),p(18,Ce,2,0,"th",9)(19,Se,2,1,"td",10),f(),s(20,11),p(21,Me,2,0,"th",9)(22,he,2,1,"td",10),f(),s(23,12),p(24,ve,2,0,"th",9)(25,ge,3,3,"td",10),f(),s(26,13),p(27,ye,2,0,"th",9)(28,we,2,1,"td",10),f(),s(29,14),p(30,xe,2,0,"th",9)(31,Ee,2,1,"td",10),f(),s(32,15),p(33,Te,2,0,"th",9)(34,be,7,4,"td",10),f(),p(35,De,1,0,"tr",16)(36,Fe,1,0,"tr",17),a(),p(37,Ie,2,0,"p",18),_(38,"mat-paginator",19),a()()()}o&2&&(d(16),u("dataSource",n.dataSource),d(19),u("matHeaderRowDef",n.displayedColumns),d(),u("matRowDefColumns",n.displayedColumns),d(),V(37,!n.dataSource||n.dataSource.data.length==0?37:-1),d(),u("pageSizeOptions",x(5,se)))},dependencies:[de,J,G,K,U,W,X,Z,ae,ee,Y,ne,te,ie,re,oe,D,F,le,me,$,A,q,O,B,L],styles:[".mat-elevation-z18[_ngcontent-%COMP%]{overflow-x:auto}.agregar[_ngcontent-%COMP%]{margin-top:1em;margin-bottom:1em}"]});let e=t;return e})();export{Ze as MediaCrudComponent};
