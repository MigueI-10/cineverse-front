import{b as P}from"./chunk-JJSDBTMF.js";import{i as M,j as A}from"./chunk-ROIV5QGY.js";import{Cb as t,Db as e,Eb as l,Ib as S,Kb as _,Lb as h,Qc as E,Tc as I,Vb as n,Xb as C,Ya as s,Za as c,ac as w,c as m,hc as k,ic as L,ja as v,pb as u,rb as x,sa as f,ta as b,xb as p}from"./chunk-VZFTKLKS.js";function O(a,o){a&1&&(t(0,"ul",11)(1,"li",12)(2,"a",13),l(3,"i",14),n(4," Admin "),e(),t(5,"ul",15)(6,"li")(7,"a",16),n(8,"Media"),e()(),t(9,"li"),l(10,"hr",17),e(),t(11,"li")(12,"a",18),n(13,"Actores"),e()(),t(14,"li"),l(15,"hr",17),e(),t(16,"li")(17,"a",19),n(18,"Comentarios"),e()()()()())}function U(a,o){if(a&1){let d=S();t(0,"ul",11)(1,"li",12)(2,"a",13),l(3,"i",14),n(4),k(5,"titlecase"),e(),t(6,"ul",15)(7,"li")(8,"a",20),n(9,"Favoritos"),e()(),t(10,"li"),l(11,"hr",17),e(),t(12,"li")(13,"a",21),_("click",function(){f(d);let i=h();return b(i.onLogout())}),n(14,"Cerrar sesi\xF3n"),e()()()()()}if(a&2){let d=h();s(4),C(" ",L(5,2,d.nomUsuario)," "),s(4),x("routerLink","favoritos/"+d.idUser)}}function y(a,o){a&1&&(t(0,"ul",11)(1,"li",8)(2,"a",22),n(3,"Login"),e()()())}var V=(()=>{let o=class o{constructor(r,i){this.authService=r,this.router=i,this.mainRole="",this.idUser="",this.nomUsuario="",this.isLoggedIn=!1}ngOnInit(){this.authService.isLoggedIn$.subscribe(r=>{let i=m(this.authService.usrActual(),[]);this.nomUsuario=i.name,this.idUser=i._id,this.isLoggedIn=r}),this.authService.checkAuthStatus().subscribe(r=>{if(this.isLoggedIn=r,console.log(this.isLoggedIn),this.isLoggedIn){let i=m(this.authService.usrActual(),[]);this.nomUsuario=i.name,this.mainRole=i.roles[0],console.log(this.authService.authStatus()),console.log(this.authService.usrActual())}})}onLogout(){this.nomUsuario="",this.isLoggedIn=!1,this.mainRole="",this.authService.logout(),this.router.navigateByUrl("/home")}};o.\u0275fac=function(i){return new(i||o)(c(P),c(M))},o.\u0275cmp=v({type:o,selectors:[["app-header"]],standalone:!0,features:[w],decls:23,vars:2,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],[1,"container"],["href","#",1,"navbar-brand"],["src","https://www.iestrassierra.net/alumnado/curso2324/DAW/daw2324a02/images/icono-min.png","alt","Icono de la web","width","80","height","auto",1,"img-fluid"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],["id","firstList",1,"navbar-nav","me-auto"],[1,"nav-item"],["href","#",1,"nav-link"],["routerLink","/busqueda","href","#",1,"nav-link"],[1,"navbar-nav"],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],[1,"bi","bi-person-circle"],["aria-labelledby","navbarDropdown",1,"dropdown-menu"],["href","#","routerLink","/media-crud",1,"dropdown-item"],[1,"dropdown-divider"],["href","#","routerLink","/actores-crud",1,"dropdown-item"],["href","#","routerLink","/comentarios",1,"dropdown-item"],["href","#",1,"dropdown-item",3,"routerLink"],[1,"dropdown-item","cursor",3,"click"],["routerLink","/login","href","#",1,"nav-link"]],template:function(i,g){i&1&&(t(0,"nav",0)(1,"div",1)(2,"a",2),l(3,"img",3),e(),t(4,"button",4),l(5,"span",5),e(),t(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),n(10,"Inicio"),e()(),t(11,"li",8)(12,"a",9),n(13,"Peliculas"),e()(),t(14,"li",8)(15,"a",9),n(16,"Series"),e()(),t(17,"li",8)(18,"a",10),n(19,"B\xFAsqueda"),e()(),u(20,O,19,0,"ul",11),e(),u(21,U,15,4,"ul",11)(22,y,4,0),e()()()),i&2&&(s(20),p(20,g.mainRole==="admin"?20:-1),s(),p(21,g.isLoggedIn?21:22))},dependencies:[I,E,A],styles:["[_nghost-%COMP%]     .p-menubar{padding-top:20px;background-color:#141414;border:none;border-radius:0}.cursor[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]     .p-menuitem-link:hover{color:#fff}[_nghost-%COMP%]     .p-menuitem-link{text-decoration:none}@media (max-width: 800px){[_nghost-%COMP%]   #navbarNav[_ngcontent-%COMP%]{margin-left:.5em}}@media (max-width: 500px){[_nghost-%COMP%]   #navbarNav[_ngcontent-%COMP%]{margin-left:1em}}"]});let a=o;return a})();export{V as a};
