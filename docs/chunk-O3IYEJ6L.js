import{a as H,b as J}from"./chunk-DHQ6GAFJ.js";import{b as q,d as z,e as U,z as G}from"./chunk-MG4W3XTZ.js";import{E as N,F as W,e as j,h as L,k as R,o as B,z as A}from"./chunk-LNHBMWTA.js";import"./chunk-7B4WEPGY.js";import{a as O}from"./chunk-2NBET2DA.js";import"./chunk-VK4RGVHF.js";import{j as E}from"./chunk-ROIV5QGY.js";import{Ab as y,Bb as k,Cb as o,Db as s,Eb as I,F as g,Ib as h,Kb as _,Lb as c,T as C,Tc as V,Ua as v,Vb as M,Ya as l,Yb as T,Za as w,Zb as D,_b as F,ac as P,i as S,ja as x,pb as u,rb as m,sa as d,ta as p,xb as f,yb as b}from"./chunk-VZFTKLKS.js";function K(i,n){if(i&1&&(o(0,"div",4)(1,"a",5),I(2,"img",6),s()()),i&2){let t=n.$implicit;l(),m("routerLink","/media/"+t._id),l(),m("src",t.imagen,v)("alt",t.titulo)}}function Q(i,n){if(i&1){let t=h();o(0,"div",3),_("scrolled",function(){d(t);let r=c();return p(r.loadMoreResults())}),y(1,K,3,3,"div",4,b),s()}if(i&2){let t=c();m("infiniteScrollDistance",2)("infiniteScrollThrottle",50),l(),k(t.aMedia)}}function X(i,n){if(i&1){let t=h();o(0,"p-messages",8),F("valueChange",function(r){d(t);let a=c(2);return D(a.mensaje,r)||(a.mensaje=r),p(r)}),s()}if(i&2){let t=c(2);T("value",t.mensaje),m("enableService",!1)("closable",!1)}}function Y(i,n){if(i&1&&u(0,X,1,3,"p-messages",7),i&2){let t=c();f(0,t.showMessage?0:-1)}}var ue=(()=>{let n=class n{constructor(e){this._mediaService=e,this.debouncer=new S,this.searchInput=new R(""),this.filters={search:"",limit:10,skip:0},this.aMedia=[],this.maxSkip=null,this.mensaje=[],this.showMessage=!1}ngOnInit(){this.mensaje=[{severity:"info",summary:"Info",detail:"No hay resultados para este t\xE9rmino de b\xFAsqueda"}],this.debouncerSubscription=this.debouncer.pipe(g(250),C(e=>this.sendValueBackend(e))).subscribe(e=>{e!==null?(this.aMedia=this.aMedia.concat(e),e.length<this.filters.limit&&(this.maxSkip=this.filters.skip)):this.showMessage=!0})}ngOnDestroy(){this.debouncerSubscription?.unsubscribe()}searchMedia(){let e=this.searchInput.value||"";e==""&&(this.aMedia=[],this.filters.skip=0,this.maxSkip=null),this.filters.search!==e&&(this.aMedia=[],this.filters.skip=0,this.maxSkip=null),this.filters.search=e,this.debouncer.next(e)}loadMoreResults(){(this.maxSkip===null||this.filters.skip<this.maxSkip)&&(this.filters.skip+=this.filters.limit,this.searchMedia())}sendValueBackend(e){return this.filters.search=e,this._mediaService.getSearchResults(this.filters)}};n.\u0275fac=function(r){return new(r||n)(w(O))},n.\u0275cmp=x({type:n,selectors:[["app-media-search"]],standalone:!0,features:[P],decls:8,vars:2,consts:[[2,"width","100%"],["type","text","matInput","",3,"keyup","formControl"],["infiniteScroll","",1,"resultados",3,"infiniteScrollDistance","infiniteScrollThrottle"],["infiniteScroll","",1,"resultados",3,"scrolled","infiniteScrollDistance","infiniteScrollThrottle"],[1,"cartaImagen"],[3,"routerLink"],[1,"imagenMedia",3,"src","alt"],[3,"value","enableService","closable"],[3,"valueChange","value","enableService","closable"]],template:function(r,a){r&1&&(o(0,"h2"),M(1,"B\xFAsqueda de Pel\xEDculas y Series"),s(),o(2,"mat-form-field",0)(3,"mat-label"),M(4,"Busca series o pel\xEDculas"),s(),o(5,"input",1),_("keyup",function(){return a.searchMedia()}),s()(),u(6,Q,3,2,"div",2)(7,Y,1,1)),r&2&&(l(5),m("formControl",a.searchInput),l(),f(6,a.aMedia.length>0||a.aMedia==null?6:7))},dependencies:[V,W,E,N,G,z,q,U,A,j,L,B,J,H],styles:[".resultados[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1em;place-items:center;margin-bottom:1em}.cartaImagen[_ngcontent-%COMP%]{width:100%;border-radius:8px;overflow:hidden;box-shadow:0 0 10px #0000001a}.imagenMedia[_ngcontent-%COMP%]{width:100%}@media (min-width: 500px) and (max-width: 800px){.resultados[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 1fr 1fr}}@media (min-width: 801px) and (max-width: 1400px){.resultados[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 1fr 1fr}}@media (min-width: 1401px){.resultados[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 1fr 1fr 1fr}}"]});let i=n;return i})();export{ue as MediaSearchComponent};
