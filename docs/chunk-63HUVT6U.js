import{a as ce}from"./chunk-NO5I7SPA.js";import{b as B,d as L,e as J,f as G,g as K,i as U,j as W,k as X,l as Y,m as Z,n as ee,o as te,p as ie,q as re,r as ae,s as E,v as ne,w as T,x as D,y as oe,z as me}from"./chunk-MG4W3XTZ.js";import{A as q,B as O,F as z,a as x,b}from"./chunk-LNHBMWTA.js";import"./chunk-7B4WEPGY.js";import"./chunk-VK4RGVHF.js";import{i as $}from"./chunk-ROIV5QGY.js";import{$b as k,Cb as i,Db as a,Eb as u,Fb as f,Gb as _,Ib as F,Kb as g,Lb as I,Oc as Q,Rb as y,Rc as P,Sb as A,Tb as w,Vb as m,Xb as v,Ya as l,Za as h,ac as V,bc as M,hc as j,ja as N,jc as H,pb as s,rb as p,sa as C,ta as S,xb as R}from"./chunk-VZFTKLKS.js";var se=["input"],pe=()=>[5,10,20],ue=()=>({color:"#1f516f"}),fe=()=>({color:"#e15639"});function _e(e,t){e&1&&(i(0,"th",19),m(1," No. "),a())}function Ce(e,t){if(e&1&&(i(0,"td",20),m(1),a()),e&2){let d=t.$implicit;l(),v(" ",d._id," ")}}function Se(e,t){e&1&&(i(0,"th",19),m(1," Nombre "),a())}function he(e,t){if(e&1&&(i(0,"td",20),m(1),a()),e&2){let d=t.$implicit;l(),v(" ",d.nombre," ")}}function ge(e,t){e&1&&(i(0,"th",19),m(1," Fecha Nacimiento "),a())}function ve(e,t){if(e&1&&(i(0,"td",20),m(1),j(2,"date"),a()),e&2){let d=t.$implicit;l(),v(" ",H(2,1,d.fechaNacimiento,"dd/MM/yyyy")," ")}}function ye(e,t){e&1&&(i(0,"th",19),m(1," Nacionalidad "),a())}function Ae(e,t){if(e&1&&(i(0,"td",20),m(1),a()),e&2){let d=t.$implicit;l(),v(" ",d.nacionalidad," ")}}function we(e,t){e&1&&(i(0,"th",19),m(1,"Acciones"),a())}function Me(e,t){if(e&1){let d=F();i(0,"td",20)(1,"a",21),g("click",function(){let n=C(d).$implicit,r=I();return S(r.updateActor(n._id))}),i(2,"mat-icon"),m(3,"edit"),a()(),i(4,"a",22),g("click",function(n){let r=C(d).$implicit,c=I();return S(c.borrarActor(r._id,n))}),i(5,"mat-icon"),m(6,"delete"),a()()()}e&2&&(l(),p("ngStyle",M(2,ue)),l(3),p("ngStyle",M(3,fe)))}function xe(e,t){e&1&&u(0,"tr",23)}function be(e,t){e&1&&u(0,"tr",24)}function Ee(e,t){e&1&&(i(0,"p",17),m(1,"No hay registros"),a())}var We=(()=>{let t=class t{constructor(o,n,r,c){this._actorService=o,this._routerService=n,this.confirmationService=r,this.messageService=c,this.displayedColumns=["id","nombre","fechaNacimiento","nacionalidad","acciones"],this.dataSource=new E}ngOnInit(){this.cargarActores()}cargarActores(){this._actorService.getAllActors().subscribe(o=>{console.log(o),localStorage.getItem("actores")||(console.log("a guardar"),localStorage.setItem("actores",JSON.stringify(o))),this.dataSource=new E(o),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}cargarFormulario(){this._routerService.navigate(["/actores-frm"])}updateActor(o){this._routerService.navigate([`/actores-frm/${o}`])}applyFilter(o){let n=o.target.value;this.dataSource.filter=n.trim().toLowerCase()}borrarActor(o,n){this.confirmationService.confirm({target:n.target,message:"Seguro que quieres borrar el actor?",header:"Accion Importante",icon:"pi pi-exclamation-triangle",acceptIcon:"none",rejectIcon:"none",rejectButtonStyleClass:"p-button-text",acceptLabel:"Si",rejectLabel:"No",accept:()=>{this._actorService.delActor(o).subscribe(r=>{r==!0?(this.messageService.add({severity:"success",summary:"Confirmed",detail:"Actor borrado correctamente"}),this.reiniciarForm()):this.messageService.add({severity:"error",summary:"Error",detail:"Error al borrar el actor",life:3e3})})},reject:()=>{this.messageService.add({severity:"info",summary:"Informacion",detail:"No se ha borrado el actor",life:3e3})}})}reiniciarForm(){this.dataSource=new E([]),this.cargarActores(),this.inputElement.nativeElement.value="",this._routerService.navigate(["/actores-crud"])}};t.\u0275fac=function(n){return new(n||t)(h(ce),h($),h(x),h(b))},t.\u0275cmp=N({type:t,selectors:[["app-act-crud"]],viewQuery:function(n,r){if(n&1&&(y(D,5),y(T,5),y(se,5)),n&2){let c;A(c=w())&&(r.sort=c.first),A(c=w())&&(r.paginator=c.first),A(c=w())&&(r.inputElement=c.first)}},standalone:!0,features:[k([b,x]),V],decls:36,vars:6,consts:[["input",""],[1,"row"],[1,"col"],[1,"agregar"],["mat-raised-button","","color","primary",3,"click"],[1,"mat-elevation-z18"],["matInput","","placeholder","Introduzca una b\xFAsqueda",3,"keyup"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombre"],["matColumnDef","fechaNacimiento"],["matColumnDef","nacionalidad"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"text-center"],["showFirstLastButtons","","aria-label","Seleccione pagina de actores",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["matTooltip","Editar Actor",1,"pointer",3,"click","ngStyle"],["matTooltip","Borrar Actor",1,"pointer",3,"click","ngStyle"],["mat-header-row",""],["mat-row",""]],template:function(n,r){if(n&1){let c=F();i(0,"div",1)(1,"div",2)(2,"h1"),m(3,"Crud Actores"),a(),u(4,"hr"),i(5,"div",3)(6,"button",4),g("click",function(){return C(c),S(r.cargarFormulario())}),m(7,"A\xF1adir"),a()(),u(8,"p-toast")(9,"p-confirmDialog"),i(10,"div",5)(11,"mat-form-field")(12,"mat-label"),m(13,"Filter"),a(),i(14,"input",6,0),g("keyup",function(de){return C(c),S(r.applyFilter(de))}),a()(),i(16,"table",7),f(17,8),s(18,_e,2,0,"th",9)(19,Ce,2,1,"td",10),_(),f(20,11),s(21,Se,2,0,"th",9)(22,he,2,1,"td",10),_(),f(23,12),s(24,ge,2,0,"th",9)(25,ve,3,4,"td",10),_(),f(26,13),s(27,ye,2,0,"th",9)(28,Ae,2,1,"td",10),_(),f(29,14),s(30,we,2,0,"th",9)(31,Me,7,4,"td",10),_(),s(32,xe,1,0,"tr",15)(33,be,1,0,"tr",16),a(),s(34,Ee,2,0,"p",17),u(35,"mat-paginator",18),a()()()}n&2&&(l(16),p("dataSource",r.dataSource),l(16),p("matHeaderRowDef",r.displayedColumns),l(),p("matRowDefColumns",r.displayedColumns),l(),R(34,!r.dataSource||r.dataSource.data.length==0?34:-1),l(),p("pageSizeOptions",M(5,pe)))},dependencies:[me,L,B,J,G,K,U,X,te,Y,W,ie,Z,ee,re,ae,T,D,oe,ne,Q,P,z,q,O],styles:[".mat-elevation-z18[_ngcontent-%COMP%]{overflow-x:auto}.agregar[_ngcontent-%COMP%]{margin-top:1em;margin-bottom:1em}"]});let e=t;return e})();export{We as ActCrudComponent};
