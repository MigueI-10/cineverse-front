import{b as y}from"./chunk-JJSDBTMF.js";import{A as L,F as I,b as f,e as M,f as c,h as E,i as F,m as O,p as T,r as R,x as N,y as j,z as D}from"./chunk-LNHBMWTA.js";import"./chunk-7B4WEPGY.js";import"./chunk-VK4RGVHF.js";import{g as k,i as S}from"./chunk-ROIV5QGY.js";import{$b as P,Cb as a,Db as n,Eb as p,Kb as b,Lb as v,Tc as x,Vb as s,Ya as d,Za as m,ac as _,ja as C,pb as l,rb as g,xb as u}from"./chunk-VZFTKLKS.js";function z(t,i){t&1&&(a(0,"small",6),s(1,"La contrase\xF1a es obligatoria"),n())}function B(t,i){t&1&&(a(0,"small",6),s(1,"La contrase\xF1a debe tener m\xEDnimo 8 caracteres"),n())}function A(t,i){t&1&&(a(0,"small",6),s(1,"La confirmaci\xF3n de la contrase\xF1a es obligatoria"),n())}function V(t,i){t&1&&(a(0,"small",6),s(1,"La contrase\xF1a debe tener m\xEDnimo 8 caracteres"),n())}function U(t,i){t&1&&(a(0,"small",6),s(1," Las contrase\xF1as no coinciden. "),n())}function G(t,i){if(t&1&&l(0,U,2,0,"small",6),t&2){let h=v();u(0,h.confirmPassword.errors!=null&&h.confirmPassword.errors.notSamePassword?0:-1)}}var te=(()=>{let i=class i{constructor(o,r,e,w,q){this.fb=o,this.authService=r,this.activeRouter=e,this.router=w,this.messageService=q,this.goodCheck="Contrase\xF1a actualizada exitosamente",this.badCheck="Error al modificar la cuenta",this.token=""}ngOnInit(){this.form=this.fb.group({password:["",[c.required,c.minLength(8)]],confirmPassword:["",[c.required,c.minLength(8)]]},{validators:this.checkBothEmailSame}),this.activeRouter.params.subscribe(o=>{this.token=o.token})}checkBothEmailSame(o){let r=o.get("password")?.value,e=o.get("confirmPassword")?.value;r!==e?o.get("confirmPassword")?.setErrors({notSamePassword:!0}):o.get("confirmPassword")?.setErrors(null)}submitChange(){if(this.form.valid){console.log(this.form.value);let{password:o}=this.form.value;console.log(this.token),this.authService.confirmChangePassword(this.token,o).subscribe({next:r=>{let e=r.message;console.log(e),e===this.goodCheck?(this.success(e),setTimeout(()=>{this.router.navigateByUrl("/login")},3e3)):e===this.badCheck&&(this.errorToast(e),this.errorToast("No modifiques el token de la url..."),setTimeout(()=>{this.router.navigateByUrl("/login")},3e3))},error:r=>{r!==void 0?this.errorToast(r):this.errorToast("El servidor no est\xE1 disponible")}})}}get password(){return this.form.get("password")}get confirmPassword(){return this.form.get("confirmPassword")}success(o){this.messageService.add({severity:"success",summary:"Success",detail:o,life:3e3})}errorToast(o){this.messageService.add({severity:"error",summary:"Error",detail:o,life:3e3})}};i.\u0275fac=function(r){return new(r||i)(m(N),m(y),m(k),m(S),m(f))},i.\u0275cmp=C({type:i,selectors:[["app-confirm-password"]],standalone:!0,features:[P([f]),_],decls:22,vars:4,consts:[[1,"background-image"],[1,"form-container"],["autocomplete","off",3,"submit","formGroup"],[1,"form-group"],["for","password"],["type","password","id","password","name","password","formControlName","password",1,"form-control"],[1,"text-danger","font-italic"],["type","password","id","confirmPassword","name","confirmPassword","formControlName","confirmPassword",1,"form-control"],[1,"cuadroRegis"],["type","submit",1,"btn","btn-primary","mt-4",3,"disabled"]],template:function(r,e){r&1&&(a(0,"div",0)(1,"div",1)(2,"h2"),s(3,"Cambio de Contrase\xF1a"),n(),a(4,"form",2),b("submit",function(){return e.submitChange()}),p(5,"p-toast"),a(6,"div",3)(7,"label",4),s(8,"Contrase\xF1a:"),n(),p(9,"input",5),l(10,z,2,0,"small",6)(11,B,2,0),n(),a(12,"div",3)(13,"label",4),s(14,"Confirma Contrase\xF1a:"),n(),p(15,"input",7),l(16,A,2,0,"small",6)(17,V,2,0)(18,G,1,1),n(),a(19,"div",8)(20,"button",9),s(21,"Cambiar Contrase\xF1a"),n()()()()()),r&2&&(d(4),g("formGroup",e.form),d(6),u(10,e.password.errors!=null&&e.password.errors.required&&e.password.dirty?10:e.password.errors!=null&&e.password.errors.minlength?11:-1),d(6),u(16,e.confirmPassword.errors!=null&&e.confirmPassword.errors.required&&e.confirmPassword.dirty?16:e.password.errors!=null&&e.password.errors.minlength?17:18),d(4),g("disabled",e.form.invalid))},dependencies:[D,O,M,E,F,T,R,j,I,L,x],styles:[".background-image[_ngcontent-%COMP%]{background-image:url(https://www.iestrassierra.net/alumnado/curso2324/DAW/daw2324a02/images/reset-min.jpg);background-size:cover;background-position:top;background-repeat:no-repeat;height:100vh;display:flex;justify-content:center;align-items:center}.form-container[_ngcontent-%COMP%]{max-width:400px;width:100%;padding:20px;background-color:#fffc;border-radius:10px;box-shadow:0 0 10px #0000004d}.form-group[_ngcontent-%COMP%]{margin-top:.5em}.registration[_ngcontent-%COMP%]{cursor:pointer;text-decoration:none}.cuadroRegis[_ngcontent-%COMP%]{display:grid;gap:10px;place-items:center}.registration[_ngcontent-%COMP%]{padding-top:.8em}@media (min-width: 500px) and (max-width: 899px){.form-container[_ngcontent-%COMP%]{width:70%}.background-image[_ngcontent-%COMP%]{background-size:cover;background-position:center;background-repeat:no-repeat}.cuadroRegis[_ngcontent-%COMP%]{display:flex;gap:10px;place-items:center}}@media (min-width: 900px) and (max-width: 1400px){.form-container[_ngcontent-%COMP%]{width:60%}.background-image[_ngcontent-%COMP%]{background-size:cover;background-position:center;background-repeat:no-repeat}.cuadroRegis[_ngcontent-%COMP%]{display:flex;gap:10px;place-items:center}}@media (min-width: 1401px){.form-container[_ngcontent-%COMP%]{width:100%;max-width:30%}.background-image[_ngcontent-%COMP%]{background-size:cover;background-position:right;background-repeat:no-repeat}.cuadroRegis[_ngcontent-%COMP%]{display:flex;gap:10px;place-items:center}}"]});let t=i;return t})();export{te as ConfirmPasswordComponent};
