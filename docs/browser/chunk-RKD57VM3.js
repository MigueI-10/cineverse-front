import{a as A,b as D,c as B}from"./chunk-GWVJB3TG.js";import{b as F}from"./chunk-JJSDBTMF.js";import{A as j,F as L,b as f,e as M,f as s,h as R,i as P,m as T,p as O,r as N,x as V,y as q,z as I}from"./chunk-LNHBMWTA.js";import"./chunk-7B4WEPGY.js";import{a as y}from"./chunk-VK4RGVHF.js";import{i as k,j as w}from"./chunk-ROIV5QGY.js";import{$b as _,Cb as r,Db as t,Eb as g,Kb as E,Lb as b,Tc as S,Vb as o,Ya as c,Za as d,ac as x,ja as C,pb as u,rb as h,xb as p}from"./chunk-VZFTKLKS.js";function K(i,a){i&1&&(r(0,"small",6),o(1,"El nombre es obligatorio"),t())}function U(i,a){i&1&&(r(0,"small",6),o(1,"El email es obligatorio"),t())}function G(i,a){i&1&&(r(0,"small",6),o(1,"El email no tiene un formato v\xE1lido"),t())}function H(i,a){i&1&&(r(0,"small",6),o(1,"La confirmaci\xF3n de email es obligatoria"),t())}function W(i,a){i&1&&(r(0,"small",6),o(1," Los correos electr\xF3nicos no coinciden. "),t())}function Y(i,a){if(i&1&&u(0,W,2,0,"small",6),i&2){let v=b();p(0,v.confirmEmail.errors!=null&&v.confirmEmail.errors.notSameEmail?0:-1)}}function $(i,a){i&1&&(r(0,"small",6),o(1,"La contrase\xF1a es obligatoria"),t())}function J(i,a){i&1&&(r(0,"small",6),o(1,"La contrase\xF1a debe tener m\xEDnimo 8 caracteres"),t())}var ce=(()=>{let a=class a{constructor(n,m,e,l,z){this.fb=n,this.authService=m,this.router=e,this.messageService=l,this.recaptchaV3Service=z,this.tokenCaptcha=""}ngOnInit(){this.registerForm=this.fb.group({name:["Killer",[s.required]],email:["killerkong950@gmail.com",[s.required,s.email]],confirmEmail:["killerkong950@gmail.com",[s.required,s.email]],password:["killerkong950",[s.required,s.minLength(8)]]},{validators:this.checkBothEmailSame})}checkBothEmailSame(n){let m=n.get("email")?.value,e=n.get("confirmEmail")?.value;m!==e?n.get("confirmEmail")?.setErrors({notSameEmail:!0}):n.get("confirmEmail")?.setErrors(null)}register(){if(this.registerForm.valid){this.recaptchaV3Service.execute("importantAction").subscribe(l=>{this.tokenCaptcha=l});let{email:n,name:m,password:e}=this.registerForm.value;this.authService.register(this.tokenCaptcha,n,m,e).subscribe({next:l=>{l===!0&&(this.success(`Comprueba la direccion ${n} para activar tu cuenta.`),setTimeout(()=>{this.router.navigateByUrl("/login")},2500))},error:l=>{l!==void 0?this.errorToast(l):this.errorToast("El servidor no est\xE1 disponible")}})}}get name(){return this.registerForm.get("name")}get email(){return this.registerForm.get("email")}get confirmEmail(){return this.registerForm.get("confirmEmail")}get password(){return this.registerForm.get("password")}success(n){this.messageService.add({severity:"success",summary:"Success",detail:n,life:3e3})}errorToast(n){this.messageService.add({severity:"error",summary:"Error",detail:n,life:3e3})}};a.\u0275fac=function(m){return new(m||a)(d(V),d(F),d(k),d(f),d(D))},a.\u0275cmp=C({type:a,selectors:[["app-register"]],standalone:!0,features:[_([{provide:A,useValue:y.siteKey},f]),x],decls:34,vars:6,consts:[[1,"background-image"],[1,"form-container"],["autocomplete","off",3,"submit","formGroup"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","formControlName","name",1,"form-control"],[1,"text-danger","font-italic"],["for","email"],["type","email","id","email","name","email","formControlName","email",1,"form-control"],["type","email","id","confirmEmail","name","confirmEmail","formControlName","confirmEmail",1,"form-control"],["for","password"],["type","password","id","password","name","password","formControlName","password",1,"form-control"],[1,"cuadroRegis"],["type","submit",1,"btn","btn-primary","mt-4",3,"disabled"],["routerLink","/login",1,"registration"]],template:function(m,e){m&1&&(r(0,"div",0)(1,"div",1)(2,"h2"),o(3,"Registro de Usuario"),t(),r(4,"form",2),E("submit",function(){return e.register()}),g(5,"p-toast"),r(6,"div",3)(7,"label",4),o(8,"Nombre:"),t(),g(9,"input",5),u(10,K,2,0,"small",6),t(),r(11,"div",3)(12,"label",7),o(13,"Email:"),t(),g(14,"input",8),u(15,U,2,0,"small",6)(16,G,2,0),t(),r(17,"div",3)(18,"label",7),o(19,"Confirma Email:"),t(),g(20,"input",9),u(21,H,2,0,"small",6)(22,Y,1,1),t(),r(23,"div",3)(24,"label",10),o(25,"Contrase\xF1a:"),t(),g(26,"input",11),u(27,$,2,0,"small",6)(28,J,2,0),t(),r(29,"div",12)(30,"button",13),o(31,"Registrarse"),t(),r(32,"a",14),o(33,"\xBFTienes cuenta? Inicia sesi\xF3n"),t()()()()()),m&2&&(c(4),h("formGroup",e.registerForm),c(6),p(10,e.name.errors!=null&&e.name.errors.required&&e.name.dirty?10:-1),c(5),p(15,e.email.errors!=null&&e.email.errors.required&&e.email.dirty?15:e.email.errors!=null&&e.email.errors.email?16:-1),c(6),p(21,e.confirmEmail.errors!=null&&e.confirmEmail.errors.required&&e.confirmEmail.dirty?21:22),c(6),p(27,e.password.errors!=null&&e.password.errors.required&&e.password.dirty?27:e.password.errors!=null&&e.password.errors.minlength?28:-1),c(3),h("disabled",e.registerForm.invalid))},dependencies:[I,T,M,R,P,O,N,q,L,w,j,S,B],styles:[".background-image[_ngcontent-%COMP%]{background-image:url(https://www.iestrassierra.net/alumnado/curso2324/DAW/daw2324a02/images/register-min.jpg);background-size:cover;background-position:center;background-repeat:no-repeat;height:100vh;display:flex;justify-content:center;align-items:center}.form-container[_ngcontent-%COMP%]{max-width:400px;width:100%;padding:20px;background-color:#fffc;border-radius:10px;box-shadow:0 0 10px #0000004d}.form-group[_ngcontent-%COMP%]{margin-top:.5em}.registration[_ngcontent-%COMP%]{cursor:pointer;text-decoration:none}.cuadroRegis[_ngcontent-%COMP%]{display:grid;gap:10px;place-items:center}.registration[_ngcontent-%COMP%]{padding-top:.8em}@media (min-width: 500px) and (max-width: 899px){.form-container[_ngcontent-%COMP%]{width:70%}.background-image[_ngcontent-%COMP%]{background-size:cover;background-position:center right;background-repeat:no-repeat}.cuadroRegis[_ngcontent-%COMP%]{display:flex;gap:10px;place-items:center}}@media (min-width: 900px) and (max-width: 1400px){.form-container[_ngcontent-%COMP%]{width:60%}.background-image[_ngcontent-%COMP%]{background-size:cover;background-position:right;background-repeat:no-repeat}.cuadroRegis[_ngcontent-%COMP%]{display:flex;gap:10px;place-items:center}}@media (min-width: 1401px){.form-container[_ngcontent-%COMP%]{width:100%;max-width:30%}.background-image[_ngcontent-%COMP%]{background-size:cover;background-position:top;background-repeat:no-repeat}.cuadroRegis[_ngcontent-%COMP%]{display:flex;gap:10px;place-items:center}}"]});let i=a;return i})();export{ce as RegisterComponent};
