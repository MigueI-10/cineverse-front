import{b as P}from"./chunk-JJSDBTMF.js";import{A as B,F as D,b as p,e as y,f as c,h as M,i as O,m as F,p as T,r as N,x as R,y as j,z as I}from"./chunk-LNHBMWTA.js";import"./chunk-7B4WEPGY.js";import"./chunk-VK4RGVHF.js";import{i as S,j as w}from"./chunk-ROIV5QGY.js";import{$b as _,Cb as a,Db as o,Eb as g,Kb as b,Lb as E,Tc as k,Vb as m,Ya as l,Za as s,ac as x,ja as v,pb as d,rb as f,xb as u}from"./chunk-VZFTKLKS.js";function q(t,r){t&1&&(a(0,"small",6),m(1,"El email es obligatorio"),o())}function z(t,r){t&1&&(a(0,"small",6),m(1,"El email no tiene un formato v\xE1lido"),o())}function L(t,r){t&1&&(a(0,"small",6),m(1,"La confirmaci\xF3n de email es obligatoria"),o())}function A(t,r){t&1&&(a(0,"small",6),m(1," Los correos electr\xF3nicos no coinciden. "),o())}function V(t,r){if(t&1&&d(0,A,2,0,"small",6),t&2){let h=E();u(0,h.confirmEmail.errors!=null&&h.confirmEmail.errors.notSameEmail?0:-1)}}var Z=(()=>{let r=class r{constructor(e,n,i,C){this.fb=e,this.authService=n,this.router=i,this.messageService=C}ngOnInit(){this.form=this.fb.group({email:["killerkong950@gmail.com",[c.required,c.email]],confirmEmail:["killerkong950@gmail.com",[c.required,c.email]]},{validators:this.checkBothEmailSame})}checkBothEmailSame(e){let n=e.get("email")?.value,i=e.get("confirmEmail")?.value;n!==i?e.get("confirmEmail")?.setErrors({notSameEmail:!0}):e.get("confirmEmail")?.setErrors(null)}submitChange(){if(this.form.valid){let{email:e}=this.form.value;this.authService.sendEmailChangePassword(e).subscribe({next:n=>{n===!0&&(this.success(`Comprueba la direccion ${e} para acceder al cambio de contrase\xF1a.`),setTimeout(()=>{this.router.navigateByUrl("/login")},2500))},error:n=>{n!==void 0?this.errorToast(n):this.errorToast("El servidor no est\xE1 disponible")}})}}get email(){return this.form.get("email")}get confirmEmail(){return this.form.get("confirmEmail")}success(e){this.messageService.add({severity:"success",summary:"Success",detail:e,life:3e3})}errorToast(e){this.messageService.add({severity:"error",summary:"Error",detail:e,life:3e3})}};r.\u0275fac=function(n){return new(n||r)(s(R),s(P),s(S),s(p))},r.\u0275cmp=v({type:r,selectors:[["app-change-password"]],standalone:!0,features:[_([p]),x],decls:23,vars:4,consts:[[1,"background-image"],[1,"form-container"],["autocomplete","off",3,"submit","formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","formControlName","email",1,"form-control"],[1,"text-danger","font-italic"],["type","email","id","confirmEmail","name","confirmEmail","formControlName","confirmEmail",1,"form-control"],[1,"cuadroRegis"],["type","submit",1,"btn","btn-primary","mt-4",3,"disabled"],["routerLink","/login",1,"registration"]],template:function(n,i){n&1&&(a(0,"div",0)(1,"div",1)(2,"h2"),m(3,"Cambio de Contrase\xF1a"),o(),a(4,"form",2),b("submit",function(){return i.submitChange()}),g(5,"p-toast"),a(6,"div",3)(7,"label",4),m(8,"Email:"),o(),g(9,"input",5),d(10,q,2,0,"small",6)(11,z,2,0),o(),a(12,"div",3)(13,"label",4),m(14,"Confirma Email:"),o(),g(15,"input",7),d(16,L,2,0,"small",6)(17,V,1,1),o(),a(18,"div",8)(19,"button",9),m(20,"Enviar Correo"),o(),a(21,"a",10),m(22,"\xBFTienes cuenta? Inicia sesi\xF3n"),o()()()()()),n&2&&(l(4),f("formGroup",i.form),l(6),u(10,i.email.errors!=null&&i.email.errors.required&&i.email.dirty?10:i.email.errors!=null&&i.email.errors.email?11:-1),l(6),u(16,i.confirmEmail.errors!=null&&i.confirmEmail.errors.required&&i.confirmEmail.dirty?16:17),l(3),f("disabled",i.form.invalid))},dependencies:[I,F,y,M,O,T,N,j,D,w,B,k],styles:[".background-image[_ngcontent-%COMP%]{background-image:url(https://www.iestrassierra.net/alumnado/curso2324/DAW/daw2324a02/images/change-min.jpg);background-size:cover;background-position:center top;background-repeat:no-repeat;height:100vh;display:flex;justify-content:center;align-items:center}.form-container[_ngcontent-%COMP%]{max-width:400px;width:100%;padding:20px;background-color:#fffc;border-radius:10px;box-shadow:0 0 10px #0000004d}.form-group[_ngcontent-%COMP%]{margin-top:.5em}.registration[_ngcontent-%COMP%]{cursor:pointer;text-decoration:none}.cuadroRegis[_ngcontent-%COMP%]{display:grid;gap:10px;place-items:center}.registration[_ngcontent-%COMP%]{padding-top:.8em}@media (min-width: 500px) and (max-width: 899px){.form-container[_ngcontent-%COMP%]{width:70%}.background-image[_ngcontent-%COMP%]{background-size:cover;background-position:center;background-repeat:no-repeat}.cuadroRegis[_ngcontent-%COMP%]{display:flex;gap:10px;place-items:center}}@media (min-width: 900px) and (max-width: 1400px){.form-container[_ngcontent-%COMP%]{width:60%}.background-image[_ngcontent-%COMP%]{background-size:cover;background-position:center;background-repeat:no-repeat}.cuadroRegis[_ngcontent-%COMP%]{display:flex;gap:10px;place-items:center}}@media (min-width: 1401px){.form-container[_ngcontent-%COMP%]{width:100%;max-width:30%}.background-image[_ngcontent-%COMP%]{background-size:cover;background-position:right;background-repeat:no-repeat}.cuadroRegis[_ngcontent-%COMP%]{display:flex;gap:10px;place-items:center}}"]});let t=r;return t})();export{Z as ChangePasswordComponent};
