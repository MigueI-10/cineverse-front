<div class="filter-section">
  <!-- Título -->
  <div class="filter-section-title" (click)="toggleCollapse()" data-bs-toggle="collapse" href="#collapseExample">
    <h3 class="my-2">Filtros de búsqueda</h3>
    <span class="toggle-icon">
      {{ isCollapsed ? '▼' : '▲' }}
    </span>
  </div>

  <!-- Área de filtros  [ngClass]="{ 'show': !isCollapsed }" -->
  <div class="filter-section-content collapse"  class="collapse" id="collapseExample">
    <!-- Contenido de los filtros -->
    <div class="cuadroFiltros card card-body">
      <div class="tipo">
          <h3>Pelicula/Serie</h3>
          <mat-button-toggle-group name="tipo" class="custom-button-group" 
          multiple [(ngModel)]="filtros.tipo" (change)="changeFilter()">
              <mat-button-toggle value="pelicula" class="custom-button">Película</mat-button-toggle>
              <mat-button-toggle value="serie" class="custom-button">Serie</mat-button-toggle>
            </mat-button-toggle-group>
      </div>
    
      <div class="tipo">
          <h3>Nota</h3>
          <mat-button-toggle-group name="nota" class="custom-button-group" [(ngModel)]="filtros.nota" (change)="changeFilter()">
              <mat-button-toggle [value]="9" class="custom-button">+9</mat-button-toggle>
              <mat-button-toggle [value]="8" class="custom-button">+8</mat-button-toggle>
              <mat-button-toggle [value]="7" class="custom-button">+7</mat-button-toggle>
              <mat-button-toggle [value]="5" class="custom-button">+5</mat-button-toggle>
            </mat-button-toggle-group>
      </div>
    
      <div class="generos">
          <h3>Genero</h3>    
              <p-multiSelect [options]="aGeneros" [(ngModel)]="filtros.generos" (onChange)="changeFilter()" 
              optionLabel="" [maxSelectedLabels]="2" [selectedItemsLabel]="'{0}' + ' genres selected'" placeholder="Selecciona un genero">
              </p-multiSelect>
      </div>

      <div class="tipo">
        <h3>Años</h3>
        <mat-button-toggle-group name="anyo" class="custom-button-group" multiple [(ngModel)]="filtros.anyo" (change)="changeFilter()" >
            <mat-button-toggle [value]="2020" class="custom-button">2020</mat-button-toggle>
            <mat-button-toggle [value]="2010" class="custom-button">2010</mat-button-toggle>
            <mat-button-toggle [value]="2000" class="custom-button">2000</mat-button-toggle>
          </mat-button-toggle-group>
      </div>

      <div class="tipo">
        <h3>Episodios</h3>
        <mat-button-toggle-group name="episodios" class="custom-button-group" multiple [(ngModel)]="filtros.episodios" (change)="changeFilter()">
            <mat-button-toggle value="+100" class="custom-button">+100</mat-button-toggle>
            <mat-button-toggle value="+50" class="custom-button">+50</mat-button-toggle>
            <mat-button-toggle value="-50" class="custom-button">Menos de 50</mat-button-toggle>
          </mat-button-toggle-group>
      </div>

      <div class="tipo">
        <h3>Duración</h3>
        <mat-button-toggle-group name="duracion" class="custom-button-group" [(ngModel)]="filtros.duracion" (change)="changeFilter()">
            <mat-button-toggle [value]="3" class="custom-button">+3 horas</mat-button-toggle>
            <mat-button-toggle [value]="2" class="custom-button">+2 horas</mat-button-toggle>
            <mat-button-toggle [value]="1" class="custom-button">+1 hora</mat-button-toggle>
          </mat-button-toggle-group>
      </div>
  </div>
</div>

@if(aMedia.length > 0 || aMedia == null){
  <div class="resultados" infiniteScroll [infiniteScrollDistance]="2" [infiniteScrollThrottle]="50" 
  (scrolled)="onScrolled()">
      @for (media of aMedia; track $index) {
          <div class="cartaImagen">
              <a [routerLink]="'/media/' + media._id"><img [src]="media.imagen" [alt]="media.titulo" class="imagenMedia"></a>
          </div>
      }
  </div>
}@else {
  <!-- @if (showMessage) {
      <p-messages [(value)]="mensaje" [enableService]="false" [closable]="false"></p-messages>
  } -->
      
  
}


